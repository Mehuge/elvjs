(function e$jscomp$0(d,k,h){function l(g,e){if(!k[g]){if(!d[g]){var n="function"==typeof require&&require;if(!e&&n)return n(g,!0);if(p)return p(g,!0);e=Error("Cannot find module '"+g+"'");throw e.code="MODULE_NOT_FOUND",e;}e=k[g]={exports:{}};d[g][0].call(e.exports,function(c){var b=d[g][1][c];return l(b?b:c)},e,e.exports,e$jscomp$0,d,k,h)}return k[g].exports}for(var p="function"==typeof require&&require,m=0;m<h.length;m++)l(h[m]);return l})({1:[function(d,k,h){function q(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function");
}var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(e,a.key,a)}}return function(d,c,b){c&&e(d.prototype,c);b&&e(d,b);return d}}();Object.defineProperty(h,"__esModule",{value:!0});
var m=0,g=function a(d,c,b){q(this,a);this.dead=this.last=this.fired=0;this.topic=d;this.once=c;this.callback=b;this.id=++m};d=function(){function d(){var c=this;q(this,d);this.diagnostics=function(){var b=function(b){if(c.events.hasOwnProperty(b)){var a=c.events[b];a&&(console.log("Topic "+b+" Listeners "+a.count+" Bucket "+a.listeners.length),a.listeners.forEach(function(a,c){a?console.log("Listener: topic "+a.topic+" index "+c+" ID "+a.id+" once "+a.once+" callback "+l(a.callback)+" fired "+a.fired+
" last "+(new Date(a.last)).toISOString()):console.log("Listener: topic "+b+" Index "+c+" is free (null)")}))}},a;for(a in c.events)b(a)};this.events={}}p(d,[{key:"addListener",value:function(c){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,a=arguments[2],d=this.events[c]=this.events[c]||{count:0,listeners:[]},f=d.listeners;b=new g(c,b,a);a=f.indexOf(null);-1===a?f.push(b):f[a]=b;d.count++;return b}},{key:"on",value:function(c,b){return this.addListener(c,!1,b)}},{key:"once",value:function(c,
b){return this.addListener(c,!0,b)}},{key:"listenOnce",value:function(c,b){return this.addListener(c,!0,b)}},{key:"removeListener",value:function(c){if(!c.dead){var b=this.events[c.topic];if(b&&(b=b.listeners)&&b.length)for(var a=0;a<b.length;a++)if(b[a]&&b[a].id===c.id){this._killListener(b,a);break}}}},{key:"off",value:function(c){this.removeListener(c)}},{key:"_killListener",value:function(c,b){var a=c[b];if(a){var d=this.events[a.topic];a.dead=Date.now();d.count--;0===d.count&&(this.events[a.topic]=
null)}c[b]=null}},{key:"emit",value:function(c){var b=this.events[c];if(b&&(b=b.listeners)&&b.length){for(var a=arguments.length,d=Array(1<a?a-1:0),f=1;f<a;f++)d[f-1]=arguments[f];for(a=0;a<b.length;a++)b[a]&&(f=b[a],f.once&&this._killListener(b,a),f.last=Date.now(),f.fired++,f.callback.apply(f,d))}}},{key:"fire",value:function(c){for(var b=arguments.length,a=Array(1<b?b-1:0),d=1;d<b;d++)a[d-1]=arguments[d];this.emit.apply(this,[c].concat(a))}},{key:"gc",value:function(){var c={},b;for(b in this.events)if(this.events.hasOwnProperty(b)){var a=
this.events[b];a&&(c[b]=a,a.count<a.listeners.length&&function(){var b=[];a.listeners.map(function(a){a&&b.push(a)});a.listeners=b}())}this.events=c}}]);return d}();h.default=d},{}],2:[function(d,k,h){Object.defineProperty(h,"__esModule",{value:!0});d=d("./emitter");h.EventEmitter=d.default;d=new d.default;h.default=d},{"./emitter":1}]},{},[2]);
